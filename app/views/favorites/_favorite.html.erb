<div class="favorite">
  <% if favorite = current_user.favorited(post) %>
    Favorited
  <% else %>
    Want to favorite this?
  <% end %>
</div>

<%= form_for [topic, post, Favorite.new] do |f| %>
  <%= button_tag type: 'submit', class: 'btn btn-small' do %>
    <i class="icon-star"> </i>&nbsp; Favorite
  <% end %>
<% end %>

 <div class="favorite">
    <% if favorite = current_user.favorited(post) %>
      <%= link_to [topic, post, favorite], class: 'btn btn-small', method: :delete do %>
        <i class="icon-star-empty"> </i>&nbsp; Unfavorite
      <% end %>
    <% else %>
      <%= form_for [topic, post, Favorite.new] do |f| %>
        <%= button_tag type: 'submit', class: 'btn btn-small' do %>
          <i class="icon-star"> </i>&nbsp; Favorite
        <% end %>
      <% end %>
    <% end %>
</div>

<% if can? :create, Favorite %>
  <div class="favorite">
    <% if favorite = current_user.favorited(post) %>
      <%= link_to [topic, post, favorite], class: 'btn btn-small', method: :delete do %>
        <i class="icon-star-empty"> </i>&nbsp; Unfavorite
      <% end %>
    <% else %>
      <%= form_for [topic, post, Favorite.new] do |f| %>
        <%= button_tag type: 'submit', class: 'btn btn-small' do %>
          <i class="icon-star"> </i>&nbsp; Favorite
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>